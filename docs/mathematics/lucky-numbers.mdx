---
title: Lucky Number
slug: /mathematics/lucky-numbers
---

## Introduction

Lucky numbers are a subset of integers that are generated by the result of a sieving process. The sieving process eliminates numbers based on their position in the remaining set.

## Explanation

Let us have one example: 

```
- Start with a list of integers beginning with 1.
  1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, . . . 

- Now, delete every second number from the above set.
  1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21, 23, 25, 27, 29, 31, . . .

- The first surviving number after 1 is 3. Delete every third number from the above set.
  1, 3, 7, 9, 13, 15, 19, 21, 25, 27, 31, . . .

- The next surviving number is seven. Delete every seventh number from the above set.
  1, 3, 7, 9, 13, 15, 21, 25, 27, 31, . . .

- The next surviving number is nine. Delete every ninth number from the above set.
  1, 3, 7, 9, 13, 15, 21, 25, 31, . . .

- Similarly, the next surviving number is thirteen. The above process is continued.

- The number which doesn't get deleted due to the above process is a LUCKY NUMBER.

- First few lucky numbers are: 1, 3, 7, 9, 13, 15, 21, 25, . . .  

```

## Algorithm

  - Given a number `n`.
  - We maintain three arrays. 

    1) `array`: to store the lucky numbers
    
    2) `count`: to store the index of the remaining numbers in `array`, used for further elimination.
    
    3) `check`: to check the condition for termination.
  - Initially, both `array` and `count` contain integers from `1` to `n`.
  - Now we remove all the even numbers from the `array`, i.e., fill all the even places with `-1`.
  - Since we didn't actually remove the values from the `array`, just filled them with `-1`, we use `count` to store the updated index of remaining numbers in the array.
  - Now we iterate till every possible elimination is done from the `array`. To terminate, we keep a check of the number of `-1's` in `array` and store them in `check` at the end of every iteration.
  - If we get the same count of `-1` at two consecutive indices of `check`, we know for sure that all possible values have been eliminated from the `array` and we terminate.
  - Finally print the values of `array` except `-1`.

## Code

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs
  defaultValue="cpp"
  values={[
    { label: 'C++', value: 'cpp', },
    { label: 'Java', value: 'java', },
  ]
}>
<TabItem value="cpp">

```cpp
#include <iostream>
using namespace std;

// Function to print lucky numbers
void lucky_numbers(int number) {

	// This array stores the lucky numbers
	int array[number];

	// This array is used for eliminating
	int count[number];

	// This array is used for terminating
	int check[number];
	check[0] = 0;

	// Fill the array with numbers from 1 to n
	for(int i = 0; i < number; i++) {
		array[i] = i + 1;
		count[i] = i + 1;
	}

	// First case where every second number is eliminated
	int counter = 1;
	for(int i = counter; i < number; i += 2) {
		array[i] = -1;
		count[i] = -1;
	}

	// Updating the count array for further eliminations
	int cnt = 0;
	for(int i = 0; i < number; i++) {
		if(count[i] != -1) {
			count[i] = cnt + 1;
			cnt++;
		}
	}

	counter = 3;
	int same = 0;
	int value = 1;

	// For further forming the series of lucky numbers
	while(1) {
		same = 0;
		/* Updating the value of array of lucky number
		 according to the count array.*/
		for(int i = 0; i < number; i++) {
			if(count[i] % counter == 0) {
				array[i] = -1;
			}
		}

		// Setting the count array to initial state 
		for(int i = 0; i < number; i++) {
			count[i] = -1;
		}

		// Forming the count array for next set of eliminations
		cnt = 0;
		for(int i = 0; i < number; i++) {
			if(array[i] != -1) {
				count[i] = cnt + 1;
				cnt++;	
			}
			else {
				// Keeping a track of number of -1's in array
				same += 1;
			}
		}

		// Filling number of -1's at each iteration
		check[value] = same;
		
		// Finding the next index to eliminate from 
		for(int i = counter; i < number; i++) {
			if(array[i] != -1) {
				counter = array[i];
				break;
			}
		}
		
		// Terminating step
		if(check[value] == check[value - 1]) {
			/* If the number of -1's don't change in
			two successive operations, exit the loop.*/
			break;
		}

		value++;
	}

	// Print the lucky numbers
	for(int i = 0; i < number; i++) {
		if(array[i] != -1) {
			cout << array[i] << " ";
		}
	}
	cout << endl;
}

int main() {

	// Take number as input from the user
	int number;
	cout << "Enter a number: ";
	cin >> number;

	// Call the function and print the lucky numbers
	cout << "\nLucky numbers till " << number << " are: ";
	lucky_numbers(number);
	return 0;
}
```

</TabItem>
<TabItem value="java">

```java
import java.util.*;
import java.lang.*;

public class LuckyNumber {

	// Function to print lucky numbers
	static void luckynumbers(int number) {

		// This array stores the lucky numbers
		int array[] = new int[number];

		// This array is used for eliminating
		int count[] = new int[number];

		// This array is used for terminating
		int check[] = new int[number];
		check[0] = 0;

		// Fill the array with numbers from 1 to n
		for(int i = 0; i < number; i++) {
			array[i] = i + 1;
			count[i] = i + 1;
		}

		// First case where every second number is eliminated
		int counter = 1;
		for(int i = counter; i < number; i += 2) {
			array[i] = -1;
			count[i] = -1;
		}

		// Updating the count array for further eliminations
		int cnt = 0;
		for(int i = 0; i < number; i++) {
			if(count[i] != -1) {
				count[i] = cnt + 1;
				cnt++;
			}
		}

		counter = 3;
		int same = 0;
		int value = 1;

		// For further forming the series of lucky numbers
		while(true) {
			same = 0;
			/* Updating the value of array of lucky number
			according to the count array.*/

			for(int i = 0; i < number; i++) {
				if(count[i] % counter == 0) {
					array[i] = -1;
				}
			}

			// Setting the count array to initial state
			for(int i = 0; i < number; i++) {
				count[i] = -1;
			}

			// Forming the count array for next set of eliminations
			cnt = 0;

			for(int i = 0; i < number; i++) {
				if(array[i] != -1) {
					count[i] = cnt + 1;
					cnt++;
				}
				else {
					// Keeping a track of number of -1's in array
					same += 1;
				}
			}

			// Filling number of -1's at each iteration
			check[value] = same;

			// Finding the next index to eliminate from
			for(int i = counter; i < number; i++) {
				if(array[i] != -1) {
					counter = array[i];
					break;
				}
			}

			// Terminating step
			if(check[value] == check[value - 1]) {
				/* If the number of -1's don't change in
				two successive operations, exit the loop.*/
				break;
			}

			value++;
		}

		// Print the lucky numbers
		for(int i = 0; i < number; i++) {
			if(array[i] != -1) {
				System.out.print(array[i] + " ");
			}
		}
	}

	public static void main(String[] args) {

		// Take number as input from the user
		Scanner scan = new Scanner(System.in);
		System.out.print("Enter a number: ");
		int number = scan.nextInt();
		scan.close();

		// Call the function and print the lucky numbers
		System.out.print("\nLucky numbers till " + number + " are: ");
		luckynumbers(number);
		System.out.print("\n");
	}
}
```

</TabItem>
</Tabs>

## Sample Input and Output

#### Input:

```
Enter a number: 45
```

#### Output:

```
Lucky numbers till 45 are: 1 3 7 9 13 15 21 25 31 33 37 43
```

## Complexity Analysis

  - Time complexity: `O(k*n)`
  - Space complexity: `O(n)`

here `n` is the input number and `k` is a constant.

## Credits

  - [Nidhish Bhimrajka](https://github.com/nidh-ish) for the [C++ Implementation](https://github.com/TesseractCoding/NeoAlgo/blob/master/C-Plus-Plus/math/LuckyNumber.cpp)
  - [Nidhish Bhimrajka](https://github.com/nidh-ish) for the [Java Implementation](https://github.com/TesseractCoding/NeoAlgo/blob/master/Java/math/LuckyNumber.java)
