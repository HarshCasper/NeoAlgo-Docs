---
title: Lucky Number
slug: /mathematics/lucky-numbers
---

## Introduction

Lucky numbers are a subset of integers that are generated by the result of a sieving process which is similar to the Sieve of Eratosthenes. The sieving process eliminates numbers based on their position in the remaining set. Lucky numbers also share some properties with primes, such as asymptotic behavior. At a high level, like a set of even integers is formed by eliminating every odd number from the whole set of integers, in a similar fashion, according to some mechanism numbers are eliminated from a set of integers to form the lucky numbers.

## Explanation

Let us have one example: 

```

- Given number n = 25.

- Lucky numbers till 25 are: 1, 3, 7, 9, 13, 15, 21, 25. These are generated according to the
  process mentioned below.

- Start with a list of integers beginning with 1 till the given number 25.
  1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25.

- Now, delete every second number from the above set.
  1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21, 23, 25.

- The first surviving number after 1 is 3. Delete every third number from the above set.
  1, 3, 7, 9, 13, 15, 19, 21, 25.

- The next surviving number is 7. Delete every seventh number from the above set.
  1, 3, 7, 9, 13, 15, 21, 25.

- The next surviving number is 9. But we see that there are only 8 remaining elements in the
  set. Hence these are the lucky numbers till 25.

```

## Algorithm

  - Given a number `n`.
  - We maintain three arrays. 

    - `array`: to store the lucky numbers
    
    - `count`: to store the index of the remaining numbers in `array`, used for further elimination.
    
    - `check`: to check the condition for termination.
  - Initially, both `array` and `count` contain integers from `1` to `n`.
  - Remove every second number from the `array`, i.e., fill all the places to be removed with `-1`.
  - Use `count` to store the updated index of remaining numbers(excpet `-1`) in `array`.
  - Iterate till no further elimination is possible from the `array`.
  - To terminate, keep a check of the number of `-1's` in `array` and store them in `check` at the end of every iteration.
  - If we get the same count of `-1` at two consecutive indices of `check`, we terminate.
  - Print the values of `array` except `-1`.

## Code

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs
  defaultValue="cpp"
  values={[
    { label: 'C++', value: 'cpp', },
    { label: 'Java', value: 'java', },
  ]
}>
<TabItem value="cpp">

```cpp
#include <iostream>
using namespace std;

// Function to print lucky numbers
void lucky_numbers(int number) {

	// This array stores the lucky numbers
	int array[number];

	// This array is used for eliminating
	int count[number];

	// This array is used for terminating
	int check[number];
	check[0] = 0;

	// Fill the array with numbers from 1 to n
	for(int i = 0; i < number; i++) {
		array[i] = i + 1;
		count[i] = i + 1;
	}

	// First case where every second number is eliminated
	int counter = 1;
	for(int i = counter; i < number; i += 2) {
		array[i] = -1;
		count[i] = -1;
	}

	// Updating the count array for further eliminations
	int cnt = 0;
	for(int i = 0; i < number; i++) {
		if(count[i] != -1) {
			count[i] = cnt + 1;
			cnt++;
		}
	}

	counter = 3;
	int same = 0;
	int value = 1;

	// For further forming the series of lucky numbers
	while(1) {
		same = 0;
		/* Updating the value of array of lucky number
		 according to the count array.*/
		for(int i = 0; i < number; i++) {
			if(count[i] % counter == 0) {
				array[i] = -1;
			}
		}

		// Setting the count array to initial state 
		for(int i = 0; i < number; i++) {
			count[i] = -1;
		}

		// Forming the count array for next set of eliminations
		cnt = 0;
		for(int i = 0; i < number; i++) {
			if(array[i] != -1) {
				count[i] = cnt + 1;
				cnt++;	
			}
			else {
				// Keeping a track of number of -1's in array
				same += 1;
			}
		}

		// Filling number of -1's at each iteration
		check[value] = same;
		
		// Finding the next index to eliminate from 
		for(int i = counter; i < number; i++) {
			if(array[i] != -1) {
				counter = array[i];
				break;
			}
		}
		
		// Terminating step
		if(check[value] == check[value - 1]) {
			/* If the number of -1's don't change in
			two successive operations, exit the loop.*/
			break;
		}

		value++;
	}

	// Print the lucky numbers
	for(int i = 0; i < number; i++) {
		if(array[i] != -1) {
			cout << array[i] << " ";
		}
	}
	cout << endl;
}

int main() {

	// Take number as input from the user
	int number;
	cout << "Enter a number: ";
	cin >> number;

	// Call the function and print the lucky numbers
	cout << "\nLucky numbers till " << number << " are: ";
	lucky_numbers(number);
	return 0;
}
```

</TabItem>
<TabItem value="java">

```java
import java.util.*;
import java.lang.*;

public class LuckyNumber {

	// Function to print lucky numbers
	static void luckynumbers(int number) {

		// This array stores the lucky numbers
		int array[] = new int[number];

		// This array is used for eliminating
		int count[] = new int[number];

		// This array is used for terminating
		int check[] = new int[number];
		check[0] = 0;

		// Fill the array with numbers from 1 to n
		for(int i = 0; i < number; i++) {
			array[i] = i + 1;
			count[i] = i + 1;
		}

		// First case where every second number is eliminated
		int counter = 1;
		for(int i = counter; i < number; i += 2) {
			array[i] = -1;
			count[i] = -1;
		}

		// Updating the count array for further eliminations
		int cnt = 0;
		for(int i = 0; i < number; i++) {
			if(count[i] != -1) {
				count[i] = cnt + 1;
				cnt++;
			}
		}

		counter = 3;
		int same = 0;
		int value = 1;

		// For further forming the series of lucky numbers
		while(true) {
			same = 0;
			/* Updating the value of array of lucky number
			according to the count array.*/

			for(int i = 0; i < number; i++) {
				if(count[i] % counter == 0) {
					array[i] = -1;
				}
			}

			// Setting the count array to initial state
			for(int i = 0; i < number; i++) {
				count[i] = -1;
			}

			// Forming the count array for next set of eliminations
			cnt = 0;

			for(int i = 0; i < number; i++) {
				if(array[i] != -1) {
					count[i] = cnt + 1;
					cnt++;
				}
				else {
					// Keeping a track of number of -1's in array
					same += 1;
				}
			}

			// Filling number of -1's at each iteration
			check[value] = same;

			// Finding the next index to eliminate from
			for(int i = counter; i < number; i++) {
				if(array[i] != -1) {
					counter = array[i];
					break;
				}
			}

			// Terminating step
			if(check[value] == check[value - 1]) {
				/* If the number of -1's don't change in
				two successive operations, exit the loop.*/
				break;
			}

			value++;
		}

		// Print the lucky numbers
		for(int i = 0; i < number; i++) {
			if(array[i] != -1) {
				System.out.print(array[i] + " ");
			}
		}
	}

	public static void main(String[] args) {

		// Take number as input from the user
		Scanner scan = new Scanner(System.in);
		System.out.print("Enter a number: ");
		int number = scan.nextInt();
		scan.close();

		// Call the function and print the lucky numbers
		System.out.print("\nLucky numbers till " + number + " are: ");
		luckynumbers(number);
		System.out.print("\n");
	}
}
```

</TabItem>
</Tabs>

## Sample Input and Output

#### Input:

```
Enter a number: 45
```

#### Output:

```
Lucky numbers till 45 are: 1 3 7 9 13 15 21 25 31 33 37 43
```

## Complexity Analysis

  - Time complexity: `O(k*n)`
  - Space complexity: `O(n)`

here `n` is the input number and `k` is a constant.

## Credits

  - [Nidhish Bhimrajka](https://github.com/nidh-ish) for the [C++ Implementation](https://github.com/TesseractCoding/NeoAlgo/blob/master/C-Plus-Plus/math/LuckyNumber.cpp)
  - [Nidhish Bhimrajka](https://github.com/nidh-ish) for the [Java Implementation](https://github.com/TesseractCoding/NeoAlgo/blob/master/Java/math/LuckyNumber.java)
